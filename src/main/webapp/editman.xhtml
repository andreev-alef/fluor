<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:head>
  <title>Флюрокартотека</title>
</h:head>

<h:body>
<h:outputScript library="js" name="locale.js" />
<p:outputPanel class="content">
  <h:form id="frmInf">
    <p:panel id="pnlInf" >
   		<f:facet name="header" >
	        Информация о пациенте
        </f:facet>
	    <h:commandButton value="Изменить информацию" />
		<p:panelGrid columns="2">
	    <p:panel >
	   		<f:facet name="header" > Персональные данные
				<p:selectBooleanCheckbox value="#{editmanBean.selUmer}" />
	 			<h:outputText value="пациент умер " />
 	        </f:facet>
			<h:panelGrid columns="2" >
	        	<p:outputLabel for="fam" value="Фамилия" />
	        	<p:inputText id="fam" value="#{editmanBean.firstName}" required="true" />
	        	<p:outputLabel for="im" value="Имя" />
		        <p:inputText id="im" value="#{editmanBean.lastName}" required="true" />
	        	<p:outputLabel for="ot" value="Отчество" />
		        <p:inputText id="ot" value="#{editmanBean.midlName}" />
	        	<p:outputLabel for="dr" value="Дата рождения" />
				<p:calendar id="dr" value="#{editmanBean.datBirthay}" required="true" locale="ru"/>
	        	<p:outputLabel for="sex" value="Пол" />
		        <p:selectOneMenu id="sex" value="#{editmanBean.selectedSex}" converter="#{editmanBean.sexConverter}">
		          <p:ajax listener="#{editmanBean.sexSelected}"  />
		          <f:selectItem itemLabel="Выберите пол" itemValue="#{null}" />
		          <f:selectItems value="#{editmanBean.sexList}" var="r" itemLabel="#{r.id} - #{r.name}" itemValue="#{r}" />
		        </p:selectOneMenu>

	        	<p:outputLabel for="grj" value="Гражданство" />
		        <p:selectOneMenu id="grj" value="#{editmanBean.selectedCitizen}" converter="#{editmanBean.citizenConverter}">
		          <p:ajax listener="#{editmanBean.citizenSelected}"  />
		          <f:selectItem itemLabel="-- Выберите --" itemValue="#{null}" />
		          <f:selectItems value="#{editmanBean.citizenList}" var="r" itemLabel="#{r.id} - #{r.name}" itemValue="#{r}" />
		        </p:selectOneMenu>
			</h:panelGrid>
		</p:panel>
		<p:panel >
	   		<f:facet name="header" >
		        Адрес проживания  на территории  Российской Федерации
	        </f:facet>
			<h:panelGrid columns="2">
	        	<p:outputLabel for="reg"  value="Регион" />
		        <p:selectOneMenu id="reg" value="#{editmanBean.region}">
		          <f:selectItem itemLabel="-- Выберите --" itemValue="#{null}" />
		        </p:selectOneMenu>
	        	<p:outputLabel for="np" value="Населенный пункт" />
		        <p:selectOneMenu id="np" value="#{editmanBean.nasp}">
		          <f:selectItem itemLabel="-- Выберите --" itemValue="#{null}" />
		        </p:selectOneMenu>
	        	<p:outputLabel for="ul" value="Улица" />
		        <p:selectOneMenu id="ul" value="#{editmanBean.street}">
		          <f:selectItem itemLabel="-- Выберите --" itemValue="#{null}" />
		        </p:selectOneMenu>

	        	<p:outputLabel for="dom" value="Дом" />
		        <p:inputText id="dom" value="#{editmanBean.dom}" />

	        	<p:outputLabel for="kp" value="Корпус" />
		        <p:inputText id="kp" value="#{editmanBean.korp}" />

	        	<p:outputLabel for="str" value="Строение" />
		        <p:inputText id="str" value="#{editmanBean.str}" />

	        	<p:outputLabel for="fl" value="Квартира" />
		        <p:inputText id="fl" value="#{editmanBean.flat}" />

	        	<p:outputLabel for="jit" value="Житель" />
		        <p:selectOneMenu id="jit"  value="#{editmanBean.selectedJitel}" converter="#{editmanBean.jitConverter}">
		          <p:ajax listener="#{editmanBean.jitelSelected}"  />
		          <f:selectItem itemLabel="-- Выберите --" itemValue="#{null}" />
		          <f:selectItems value="#{editmanBean.jitelList}" var="r" itemLabel="#{r.id} - #{r.name}" itemValue="#{r}" />
		        </p:selectOneMenu>

	        	<p:outputLabel for="tl" value="Телефон" />
		        <p:inputText id="tl" value="#{editmanBean.telefon}" />
			</h:panelGrid>
		</p:panel>
		</p:panelGrid>	   
		<p:panel >
	   		<f:facet name="header" >
		        Медицинская организация, к которой прикреплен пациент по ОМС
	        </f:facet>
			<h:panelGrid columns="2">
	        	<p:outputLabel for="regmo"  value="Регион" />
		        <p:selectOneMenu id="regmo"  value="#{editmanBean.selectedMor}" converter="#{editmanBean.morConverter}">
		          <p:ajax listener="#{editmanBean.morSelected}" update="npmo" />
		          <f:selectItem itemLabel="-- Выберите --" itemValue="#{null}" />
		          <f:selectItems value="#{editmanBean.moRegionList}" var="r" itemLabel="#{r.regId} - #{r.name}" itemValue="#{r}" />
		        </p:selectOneMenu>
	        	<p:outputLabel for="npmo" value="Населенный пункт" />
		        <p:selectOneMenu id="npmo"  value="#{editmanBean.selectedMot}" converter="#{editmanBean.motConverter}">
		          <p:ajax listener="#{editmanBean.motSelected}" update="mo" />
		          <f:selectItem itemLabel="-- Выберите --" itemValue="#{null}" />
                  <f:selectItem itemLabel="#{editmanBean.moTerList.size() == 0 ? '-- Список пуст --' : '-- Ничего не выбрано --'}" itemValue="#{null}" noSelectionOption="true" />
		          <f:selectItems value="#{editmanBean.moTerList}" var="r" itemLabel="#{r.id.terId} - #{r.name}" itemValue="#{r}" />
		        </p:selectOneMenu>

	        	<p:outputLabel for="mo" value="Наименование МО" />
		        <p:selectOneMenu id="mo" value="#{editmanBean.selectedMom}" converter="#{editmanBean.momConverter}">
		          <p:ajax listener="#{editmanBean.momSelected}" update="clmo" />
                  <f:selectItem itemLabel="#{editmanBean.moMainList.size() == 0 ? '-- Список пуст --' : '-- Ничего не выбрано --'}" itemValue="#{null}" noSelectionOption="true" />
		          <f:selectItems value="#{editmanBean.moMainList}" var="r" itemLabel="#{r.id.lpuId} - #{r.name}" itemValue="#{r}" />
		        </p:selectOneMenu>
	        	<p:outputLabel for="clmo" value="Поликлиника" />
		        <p:selectOneMenu id="clmo" value="#{editmanBean.selectedMop}" converter="#{editmanBean.mopConverter}">
<!-- 		          <p:ajax listener="#{editmanBean.mopSelected}" update="adrmo" /> -->
                  <f:selectItem itemLabel="#{editmanBean.moPoliclinicList.size() == 0 ? '-- Список пуст --' : '-- Ничего не выбрано --'}" itemValue="#{null}" noSelectionOption="true" />
		          <f:selectItems value="#{editmanBean.moPoliclinicList}" var="r" itemLabel="#{r.id.polId} - #{r.name}" itemValue="#{r}" />
		        </p:selectOneMenu>
	        	<p:outputLabel for="adrmo" value="Адрес" />
				<h:outputText id="adrmo" value="#{editmanBean.selectedMom.addr}" />
			</h:panelGrid>
		</p:panel>
		<p:panel >
	   		<f:facet name="header" >
		        Контингент населения
	        </f:facet>
			<h:panelGrid columns="2">
	        	<p:outputLabel for="dg" value="Декретированная группа" />
		        <p:selectOneMenu id="dg" value="#{editmanBean.selectedDg}" converter="#{editmanBean.dgConverter}">
		          <p:ajax listener="#{editmanBean.dgSelected}"  />
		          <f:selectItem itemLabel="-- отсутствует --" itemValue="#{null}" />
		          <f:selectItems value="#{editmanBean.decrList}" var="r" itemLabel="#{r.id} - #{r.name}" itemValue="#{r}" />
		        </p:selectOneMenu>

	        	<p:outputLabel for="mg" value="Медицинская группа" />
		        <p:selectOneMenu id="mg" value="#{editmanBean.selectedMg}" converter="#{editmanBean.mgConverter}">
		          <p:ajax listener="#{editmanBean.mgSelected}"  />
		          <f:selectItem itemLabel="-- отсутствует --" itemValue="#{null}" />
		          <f:selectItems value="#{editmanBean.medList}" var="r" itemLabel="#{r.id} - #{r.name}" itemValue="#{r}" />
		        </p:selectOneMenu>

	        	<p:outputLabel for="rg" value="Группа риска (осмотр 2 раза в год)" />
		        <p:selectOneMenu id="rg" value="#{editmanBean.selectedSg}" converter="#{editmanBean.sgConverter}">
		          <p:ajax listener="#{editmanBean.sgSelected}"  />
		          <f:selectItem itemLabel="-- отсутствует --" itemValue="#{null}" />
		          <f:selectItems value="#{editmanBean.socList}" var="r" itemLabel="#{r.id} - #{r.name}" itemValue="#{r}" />
		        </p:selectOneMenu>
			</h:panelGrid>
		</p:panel>
		<h:panelGrid columns="2">
		    <h:commandButton value="Сохранить" />
		    <h:commandButton value="Отменить " />
		</h:panelGrid>
    </p:panel>
  </h:form>
</p:outputPanel>

<ui:include src="WEB-INF/templates/examination.xhtml"/>

</h:body>
</html>
