<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:head>
  <title>Флюрокартотека</title>
</h:head>

<h:body>
<h:outputScript library="js" name="locale.js" />
<p:outputPanel class="content">
  <h:form id="frmInf">
    <p:panel id="pnlInf" >
   		<f:facet name="header" >
	        Информация о пациенте
        </f:facet>
	    <h:commandButton value="Изменить информацию" />
		<p:panelGrid columns="2">
	    <p:panel >
	   		<f:facet name="header" > Персональные данные
				<p:selectBooleanCheckbox value="#{editmanBean.selUmer}" />
	 			<h:outputText value="пациент умер " />
 	        </f:facet>
			<h:panelGrid columns="2" >
	        	<p:outputLabel for="fam" value="Фамилия" />
	        	<p:inputText id="fam" value="#{editmanBean.firstName}" required="true" />
	        	<p:outputLabel for="im" value="Имя" />
		        <p:inputText id="im" value="#{editmanBean.lastName}" required="true" />
	        	<p:outputLabel for="ot" value="Отчество" />
		        <p:inputText id="ot" value="#{editmanBean.midlName}" />
	        	<p:outputLabel for="dr" value="Дата рождения" />
				<p:calendar id="dr" value="#{editmanBean.datBirthay}" required="true" locale="ru"/>
	        	<p:outputLabel for="sex" value="Пол" />
		        <p:selectOneMenu id="sex" value="#{editmanBean.selectedSex}" converter="#{editmanBean.sexConverter}">
		          <p:ajax listener="#{editmanBean.sexSelected}"  />
		          <f:selectItem itemLabel="Выберите пол" itemValue="#{null}" />
		          <f:selectItems value="#{editmanBean.sexList}" var="r" itemLabel="#{r.id} - #{r.name}" itemValue="#{r.id}" />
		        </p:selectOneMenu>

	        	<p:outputLabel for="grj" value="Гражданство" />
		        <p:selectOneMenu id="grj" value="#{editmanBean.selectedCitizen}" converter="#{editmanBean.citizenConverter}">
		          <p:ajax listener="#{editmanBean.citizenSelected}"  />
		          <f:selectItem itemLabel="-- Выберите --" itemValue="#{null}" />
		          <f:selectItems value="#{editmanBean.citizenList}" var="r" itemLabel="#{r.id} - #{r.name}" itemValue="#{r.id}" />
		        </p:selectOneMenu>
			</h:panelGrid>
		</p:panel>
		<p:panel >
	   		<f:facet name="header" >
		        Адрес проживания  на территории  Российской Федерации
	        </f:facet>
			<h:panelGrid columns="2">
	        	<p:outputLabel for="reg"  value="Регион" />
		        <p:selectOneMenu id="reg" value="#{editmanBean.region}">
		          <f:selectItem itemLabel="-- Выберите --" itemValue="#{null}" />
		        </p:selectOneMenu>
	        	<p:outputLabel for="np" value="Населенный пункт" />
		        <p:selectOneMenu id="np" value="#{editmanBean.nasp}">
		          <f:selectItem itemLabel="-- Выберите --" itemValue="#{null}" />
		        </p:selectOneMenu>
	        	<p:outputLabel for="ul" value="Улица" />
		        <p:selectOneMenu id="ul" value="#{editmanBean.street}">
		          <f:selectItem itemLabel="-- Выберите --" itemValue="#{null}" />
		        </p:selectOneMenu>

	        	<p:outputLabel for="dom" value="Дом" />
		        <p:inputText id="dom" value="#{editmanBean.dom}" />

	        	<p:outputLabel for="kp" value="Корпус" />
		        <p:inputText id="kp" value="#{editmanBean.korp}" />

	        	<p:outputLabel for="str" value="Строение" />
		        <p:inputText id="str" value="#{editmanBean.str}" />

	        	<p:outputLabel for="fl" value="Квартира" />
		        <p:inputText id="fl" value="#{editmanBean.flat}" />

	        	<p:outputLabel for="jit" value="Житель" />
		        <p:selectOneMenu id="jit"  value="#{editmanBean.selectedJitel}" converter="#{editmanBean.jitConverter}">
		          <p:ajax listener="#{editmanBean.jitelSelected}"  />
		          <f:selectItem itemLabel="-- Выберите --" itemValue="#{null}" />
		          <f:selectItems value="#{editmanBean.jitelList}" var="r" itemLabel="#{r.id} - #{r.name}" itemValue="#{r.id}" />
		        </p:selectOneMenu>

	        	<p:outputLabel for="tl" value="Телефон" />
		        <p:inputText id="tl" value="#{editmanBean.telefon}" />
			</h:panelGrid>
		</p:panel>
		</p:panelGrid>	   
		<p:panel >
	   		<f:facet name="header" >
		        Медицинская организация, к которой прикреплен пациент по ОМС
	        </f:facet>
			<h:panelGrid columns="2">
	        	<p:outputLabel for="npmo" value="Населенный пункт" />
		        <p:selectOneMenu id="npmo"  value="#{editmanBean.selectedJitel}" converter="#{editmanBean.jitConverter}">
		          <p:ajax listener="#{editmanBean.jitelSelected}"  />
		          <f:selectItem itemLabel="-- Выберите --" itemValue="#{null}" />
		          <f:selectItems value="#{editmanBean.moTerList}" var="r" itemLabel="#{r.name}" itemValue="#{r.id}" />
		        </p:selectOneMenu>

	        	<p:outputLabel for="mo" value="Наименование МО" />
		        <p:selectOneMenu id="mo" value="#{editmanBean.nameMO}">
		          <f:selectItem itemLabel="-- Выберите --" itemValue="#{null}" />
		        </p:selectOneMenu>
	        	<p:outputLabel for="clmo" value="Поликлиника" />
		        <p:selectOneMenu id="clmo" value="#{editmanBean.clinicMO}">
		          <f:selectItem itemLabel="-- Выберите --" itemValue="#{null}" />
		        </p:selectOneMenu>
	        	<p:outputLabel for="adr" value="Адрес" />
		        <p:inputText id="adr" value="#{editmanBean.adresMO}" />
			</h:panelGrid>
		</p:panel>
		<p:panel >
	   		<f:facet name="header" >
		        Контингент населения
	        </f:facet>
			<h:panelGrid columns="2">
	        	<p:outputLabel for="dg" value="Декретированная группа" />
		        <p:selectOneMenu id="dg" value="#{editmanBean.selectedDg}" converter="#{editmanBean.dgConverter}">
		          <p:ajax listener="#{editmanBean.dgSelected}"  />
		          <f:selectItem itemLabel="-- Выберите --" itemValue="#{null}" />
		          <f:selectItems value="#{editmanBean.decrList}" var="r" itemLabel="#{r.id} - #{r.name}" itemValue="#{r.id}" />
		        </p:selectOneMenu>

	        	<p:outputLabel for="mg" value="Медицинская группа" />
		        <p:selectOneMenu id="mg" value="#{editmanBean.selectedMg}" converter="#{editmanBean.mgConverter}">
		          <p:ajax listener="#{editmanBean.mgSelected}"  />
		          <f:selectItem itemLabel="-- Выберите --" itemValue="#{null}" />
		          <f:selectItems value="#{editmanBean.medList}" var="r" itemLabel="#{r.id} - #{r.name}" itemValue="#{r.id}" />
		        </p:selectOneMenu>

	        	<p:outputLabel for="rg" value="Группа риска (осмотр 2 раза в год)" />
		        <p:selectOneMenu id="rg" value="#{editmanBean.selectedSg}" converter="#{editmanBean.sgConverter}">
		          <p:ajax listener="#{editmanBean.sgSelected}"  />
		          <f:selectItem itemLabel="-- Выберите --" itemValue="#{null}" />
		          <f:selectItems value="#{editmanBean.socList}" var="r" itemLabel="#{r.id} - #{r.name}" itemValue="#{r.id}" />
		        </p:selectOneMenu>
			</h:panelGrid>
		</p:panel>
		<h:panelGrid columns="2">
		    <h:commandButton value="Сохранить" />
		    <h:commandButton value="Отменить " />
		</h:panelGrid>
	   
    </p:panel>

    <p:panel >
   		<f:facet name="header" >
	        Обследования пациента
        </f:facet>
		<p:commandLink update=":frmEdt:pnlDlg" process="@this" actionListener="#{listRH.selectLsn}" oncomplete="PF('edt').show()" >
<!-- 			<f:attribute name="refheaderid" value="#{refh.id}"/> -->
			<h:panelGroup layout="block" />
			<h:outputText id="addisl"  value="Добавить обследование"/>
		</p:commandLink>   
		<p:dataTable var="x-ray" >
		    <p:column headerText="Дата">
<!-- 		        <h:outputText value="#{x-ray.id}" /> -->
		    </p:column>
		 
		    <p:column headerText="Населенный пункт">
		    </p:column>
		 
		    <p:column headerText="МО">
		    </p:column>
		 
		    <p:column headerText="Вид">
		    </p:column>

		    <p:column headerText="Результат">
		    </p:column>
		 
		    <p:column headerText="Верификация">
		    </p:column>
		 
		    <p:column headerText="Действия">
				<h:panelGrid columns="2">
					<p:commandLink update=":frmEdt:pnlDlg" process="@this" actionListener="#{listRH.selectLsn}" oncomplete="PF('edt').show()" >
		<!-- 			<f:attribute name="refheaderid" value="#{refh.id}"/> -->
						<h:panelGroup layout="block" />
						<h:outputText id="edtisl" value="править"/>
					</p:commandLink>   
					<p:commandLink update=":frmDel:pnlDlg" process="@this" actionListener="#{listRH.selectLsn}" oncomplete="PF('del').show()" >
		<!-- 			<f:attribute name="refheaderid" value="#{refh.id}"/> -->
						<h:panelGroup layout="block" />
						<h:outputText value="удалить"/>
					</p:commandLink>   
				</h:panelGrid>
		    </p:column>
		 
		</p:dataTable>
    </p:panel>

    <h:panelGrid columns="1" >
	<p:link outcome="listman">
		<f:param name="faces-redirect" value="true"/>
<!--	<f:param name="refheaderid" value="#{refh.id}"/> -->
		<h:panelGroup layout="block" />
		<h:outputText value="Вернуться к списку пациентов"/>
	</p:link>   							
    <p:commandButton id="btnNF" value="Печать направления на флюорографию" >
    </p:commandButton>
	<p:commandLink update=":frmEdt:pnlDlg" process="@this" actionListener="#{listRH.selectLsn}" oncomplete="PF('edt').show()" >
		<h:panelGroup layout="block" />
		<h:outputText value="править"/>
	</p:commandLink>   
	<p:commandLink update=":frmDel:pnlDlg" process="@this" actionListener="#{listRH.selectLsn}" oncomplete="PF('del').show()" >
		<h:panelGroup layout="block" />
		<h:outputText value="удалить"/>
	</p:commandLink>   
	</h:panelGrid>

  </h:form>
</p:outputPanel>  
  
  <h:form id="frmEdt">
	<p:dialog id="dlg" widgetVar="edt" modal="true" header="Редактировать обследование" resizable="false" class="my_overley">
		<p:outputPanel id="pnlDlg">
        <h:panelGrid columns="2" cellpadding="5">
            <h:outputLabel for="dob" value="Дата обследования" />
			<p:calendar id="dob" value="#{null}" locale="ru"/>
 
        	<p:outputLabel for="npmo" value="Населенный пункт" />
	        <p:selectOneMenu id="npmo" value="#{editmanBean.naspMO}">
	          <f:selectItem itemLabel="-- Выберите --" itemValue="#{null}" />
	        </p:selectOneMenu>
	        
            <h:outputLabel for="np" value="Медицинская организация" />
            <p:inputText id="np" label="" />
 
            <h:outputLabel for="vid" value="Вид обследования" />
	        <p:selectOneMenu id="vid" value="#{editmanBean.selectedExt}" converter="#{editmanBean.extConverter}">
	          <p:ajax listener="#{editmanBean.extSelected}"  />
	          <f:selectItem itemLabel="-- Выберите --" itemValue="#{null}" />
	          <f:selectItems value="#{editmanBean.extList}" var="r" itemLabel="#{r.id} - #{r.name}" itemValue="#{r.id}" />
	        </p:selectOneMenu>

            <h:outputLabel for="rez" value="Результат" />
	        <p:selectOneMenu id="rez" value="#{editmanBean.selectedResType}" converter="#{editmanBean.restypeConverter}">
	          <p:ajax listener="#{editmanBean.reztypeSelected}"  />
	          <f:selectItem itemLabel="-- Выберите --" itemValue="#{null}" />
	          <f:selectItems value="#{editmanBean.restypeList}" var="r" itemLabel="#{r.id} - #{r.name}" itemValue="#{r.id}" />
	        </p:selectOneMenu>
            
            <h:outputLabel for="mf" value="Марка флюроаппарата" />
            <p:inputText id="mf" label="" />

            <h:outputLabel for="ver" value="Верификация диагноза" />
            <p:inputText id="ver" label="" />
            
		    <h:commandButton value="Сохранить" />
		    <h:commandButton value="Отменить " />
        </h:panelGrid>
		</p:outputPanel>
    </p:dialog>
  </h:form>
  
  <h:form id="frmDel">
	<p:dialog id="dlg" widgetVar="del" modal="true" header="Удалить обследование" resizable="false" class="my_overley">
		<p:outputPanel id="pnlDlg">
        <h:panelGrid columns="2" >
            <h:outputLabel for="p1" value="Дата обследования" />
            <h:outputText id="p1" value="xxxx" />
            <h:outputLabel for="p2" value="Медицинская организация" />
            <h:outputText id="p2" value="xxxx" />
            <h:outputLabel for="p3" value="Вид обследования" />
            <h:outputText id="p3" value="xxxx" />
            <h:outputLabel for="p4" value="Результат" />
            <h:outputText id="p4" value="xxxx" />
            <h:outputLabel for="p5" value="Марка флюроаппарата" />
            <h:outputText id="p5" value="xxxx" />
            <h:outputLabel for="p6" value="Верификация диагноза" />
            <h:outputText id="p6" value="xxxx" />
<!--             <h:outputText value="Дата обследования: #{selectBooleanView.value1}" /> -->

        </h:panelGrid>
	    <h:commandButton value="Удалить" />
		</p:outputPanel>
    </p:dialog>
  </h:form>
</h:body>
</html>
